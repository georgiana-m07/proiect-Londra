YUI.add("stuff-creation-view",(function(t,e){t.namespace("Views")[this.name]=t.Base.create("stuff-creation-view",t.FlickrView,[],{initializer:function(t){return this.params=t,this.heading=t.heading,this.placeholderTitle=t.placeholderTitle,this.placeholderDescription=t.placeholderDescription,this.cancelText=t.cancelText,this.actionText=t.actionText,this.inlineCreation=t.inlineCreation,this},buildContainer:function(){return this.setContainerWithTemplate("stuff-creation-view",{heading:this.heading,placeholderTitle:this.placeholderTitle,placeholderDescription:this.placeholderDescription,cancelText:this.cancelText,actionText:this.actionText,isLarge:this.params.useLargeLayout}),this},activate:function(){return this.isCreating=!1,this},showError:function(t,e,i){i&&t.set("text",i),e?t.removeClass("hidden"):t.addClass("hidden")},showTitleError:function(t,e){this.titleItemNode.toggleClass("error",t),e&&this.titleErrorNode.set("text",e)},destructor:function(){this.closeTimer&&clearTimeout(this.closeTimer)},resetView:function(){this.buildContainer(),this.activate()},createCuration:function(){var e=this;return this.isCreating?t.Promise.reject():(this.isCreating=!0,this.actionButton.setAttribute("disabled"),this.createNewAndAddPhoto().then((function(t){return e.isCreating=!1,e.actionButton.removeAttribute("disabled"),t})).catch((function(t){throw e.isCreating=!1,e.actionButton.removeAttribute("disabled"),t})))},focusInitial:function(){}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-stuff-creation-view"]});YUI.add("flag-modal-view",(function(t,e){"use strict";require("hermes-core/flog")(e);t.namespace("Views").FlagModal=t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t;var e=[{cancelText:this.intlMessage({intlName:"common.CANCEL"}),actionText:this.intlMessage({intlName:"stats.NEXT"})},{cancelText:this.intlMessage({intlName:"stats.PREVIOUS"}),actionText:this.intlMessage({intlName:"stats.NEXT"})},{cancelText:this.intlMessage({intlName:"stats.PREVIOUS"}),actionText:this.intlMessage({intlName:"stats.NEXT"})},{cancelText:this.intlMessage({intlName:"stats.PREVIOUS"}),actionText:this.intlMessage({intlName:"stats.NEXT"})},{cancelText:this.intlMessage({intlName:"stats.PREVIOUS"}),actionText:this.intlMessage({intlName:"stats.NEXT"})},{cancelText:this.intlMessage({intlName:"common.CANCEL"}),actionText:this.intlMessage({intlName:"common.SEND"})},{cancelText:this.intlMessage({intlName:"common.BACK"}),actionText:this.intlMessage({intlName:"common.CONTINUE_ARTICLE"}),linkUrl:"https://flickrhelp.com/hc/en-us/articles/4404063895956-Copyright-and-Intellectual-Property-Policy"},{cancelText:this.intlMessage({intlName:"common.BACK"}),actionText:this.intlMessage({intlName:"common.CONTINUE_FORM"}),linkUrl:"https://flickrhelp.com/hc/en-us/requests/new"},{cancelText:this.intlMessage({intlName:"common.BACK"}),actionText:this.intlMessage({intlName:"common.CONTINUE_ARTICLE"}),linkUrl:"https://flickrhelp.com/hc/en-us/articles/4404058016532-Content-removal-requests"},{cancelText:this.intlMessage({intlName:"common.CANCEL"}),actionText:this.intlMessage({intlName:"common.SEND"})},{cancelText:this.intlMessage({intlName:"common.CANCEL"}),actionText:this.intlMessage({intlName:"common.SEND"})},{cancelText:this.intlMessage({intlName:"common.CANCEL"}),actionText:this.intlMessage({intlName:"common.SEND"})},{cancelText:this.intlMessage({intlName:"common.CANCEL"}),actionText:this.intlMessage({intlName:"common.SEND"})}];return this.labelList=e,this.set("title",this.intlMessage({intlName:"photo-page-scrappy.FLAG_PHOTO"})),this.set("appContext",t.appContext),this.set("dismissOnOverlayClick",!1),this.set("dismissOnActionClick",!0),this.set("actionButtonDisabled",!1),this.set("showCancelButton",!0),this.set("showCancelX",!0),this.set("contentUrl",t.contentUrl),this.set("flagPhotoContainer",t.flagPhotoContainer),this.constructor.superclass.initializer.call(this,t)},buildContainer:function(){return this.activeStep=0,this.previousStep=0,this.nextStep=0,this.setContainerWithTemplate("flag-modal-view",{cancelText:this.labelList[0].cancelText,actionText:this.labelList[0].actionText,reportOptions:this.categories,signedOut:!this.appContext.getViewer().signedIn}),this},activate:function(){var t=this,e=this.get("container");this.dropdown={},this.headTitleNode=e.one(".title"),this.actionContainer=e.one(".action-container"),this.cancelButton=e.one(".button-cancel"),this.actionButton=e.one(".button-action"),this.actionLink=e.one(".link-action"),this.closeButton=e.one(".close-x-button"),this.selectErrorNode=e.one(".error-message.select-error"),this.cancelButton.set("text",this.labelList[0].cancelText),this.actionButton.set("text",this.labelList[0].actionText),this.registerEventHandler(e.delegate("change",this.handleReportTypeChange.bind(this),".report-type")),this.registerEventHandler(this.cancelButton.on("click",this.handleCancel.bind(this))),this.registerEventHandler(this.actionButton.on("click",this.handleAction.bind(this))),this.registerEventHandler(this.closeButton.on("click",function(){t.fire("readyToClose")}.bind(this)))},handleAction:function(t){this.activeStep>=5?(this.labelList[this.activeStep].linkUrl||this.submitReport(),this.fire("readyToClose")):(t.preventDefault(),this.nextStep===this.activeStep?this.showError(this.selectErrorNode,!0,this.intlMessage({intlName:"common.SELECT_OPTION"})):(this.previousStep=this.activeStep,this.goToStep(this.nextStep)))},handleCancel:function(){this.showError(this.selectErrorNode,!1),this.nextStep=this.activeStep,this.activeStep>0&&this.activeStep<4?this.goToStep(0):this.activeStep>=4&&5!==this.activeStep&&this.activeStep<9?this.goToStep(this.previousStep):this.params.inlineCreation?(this.fire("cancel"),this.resetView()):this.fire("readyToClose")},handleReportTypeChange:function(t){var e=t.target.ancestor(".radio",!0);this.showError(this.selectErrorNode,!1),e&&e.getAttribute("data-next-step")&&(this.nextStep=parseInt(e.getAttribute("data-next-step")),e.getAttribute("data-report-id")&&(this.reportId=e.getAttribute("data-report-id")))},goToStep:function(t){var e=this.get("container"),i=e.one('.step-container[data-step-index="'+this.activeStep+'"]'),s=e.one('.step-container[data-step-index="'+t+'"]'),n=s.one(".report-subject");clearTimeout(this.goToStepTimeout),s.removeClass("hiding-left"),s.removeClass("hiding-right"),i.removeClass("showing"),i.removeClass("showing-left"),i.removeClass("showing-right"),s.removeClass("hidden"),s.addClass("showing"),t>this.activeStep?(i.addClass("hiding-left"),setTimeout((function(){s.addClass("showing-left")}),0)):(i.addClass("hiding-right"),setTimeout((function(){s.addClass("showing-right")}),0)),this.goToStepTimeout=setTimeout((function(){i.removeClass("hiding-left"),i.removeClass("hiding-right"),s.removeClass("showing"),s.removeClass("showing-left"),s.removeClass("showing-right"),i.addClass("hidden")}),300),this.setStepValues(t),n&&n.focus(),this.fire("contentSizeChanged")},setStepValues:function(t){var e=this;this.actionContainer.addClass("changing"),setTimeout((function(){e.cancelButton.set("text",e.labelList[t].cancelText),e.actionButton.set("text",e.labelList[t].actionText),e.labelList[t].linkUrl&&e.actionLink.set("href",e.labelList[t].linkUrl)}),300),setTimeout((function(){e.actionContainer.removeClass("changing"),e.cancelButton.set("text",e.labelList[t].cancelText),e.actionButton.set("text",e.labelList[t].actionText),e.labelList[t].linkUrl&&e.actionLink.set("href",e.labelList[t].linkUrl)}),600),this.activeStep=t},resetView:function(){this.buildContainer(),this.activate()},showError:function(e,i,s){s&&e.set("text",t.StringHelper.preventOrphans(s)),e.toggleClass("hidden",!i)},submitReport:function(){var e=this,i=this.get("container").one('.step-container[data-step-index="'+this.activeStep+'"]').one(".report-subject").get("value").substr(0,500),s=this.reportId,n=this.get("contentUrl"),a=this.get("flagPhotoContainer");e.appContext.callAPI("flickr.report.abuse.submitAbuse",{report_URL:n,report_type_id:s,report:t.StringHelper.escapeHtml(i)}).then((function(t){a&&a.replace(e.intlMessage({intlName:"more-menu-view.PHOTO_HAS_BEEN_FLAGGED"}))}),(function(t){e.onError(e.intlMessage({intlName:"more-menu-view.PROBLEM_FLAGGING"}))}))}})}),"@VERSION@",{requires:["flickr-view","fluid-modal-view","hermes-template-flag-modal-view","string-helper","stuff-creation-view"],optionalRequires:["hermes-core"],optional:[],langBundles:["common","photo-page-scrappy","more-menu-view","stats","add-to-stuff"]});YUI.add("hermes-lang-more-menu-view",(function(e,t){e.Intl.add("hermes/more-menu-view","en-US",{ADD_TO_ALBUM:[{type:0,value:"Add to album"}],ADD_TO_SET:[{type:0,value:"Add to set"}],ADD_TO_GROUP:[{type:0,value:"Add to group"}],INVITE_TO_GROUP:[{type:0,value:"Invite to group"}],ADD_TO_GALLERY:[{type:0,value:"Add to Gallery"}],ADD_TO_REMOVE_FROM_ALBUM:[{type:0,value:"Add to / remove from album"}],ADD_TO_REMOVE_FROM_SET:[{type:0,value:"Add to / remove from set"}],ADD_TO_REMOVE_FROM_GALLERY:[{type:0,value:"Add to / remove from gallery"}],ADD_TO_REMOVE_FROM_GROUP:[{type:0,value:"Add to / remove from group"}],INVITE_TO_REMOVE_FROM_GROUP:[{type:0,value:"Invite to / remove from group"}],FLAG_PHOTO:[{type:0,value:"Flag this Photo?"}],FLAG:[{type:0,value:"Flag photo"}],MARK_FOR_REVIEW:[{type:0,value:"Mark for review"}],PHOTO_HAS_BEEN_FLAGGED:[{type:0,value:"This photo has been flagged"}],PROBLEM_FLAGGING:[{type:0,value:"There was a problem flagging this photo"}],ADD_PHOTO_TO_GROUP:[{type:0,value:"Add this photo to a group"}],INVITE_PHOTO_TO_GROUP:[{type:0,value:"Invite this photo to a group"}],ADD_PHOTO_TO_GALLERY:[{type:0,value:"Add this photo to a gallery"}],ADD_PHOTO_TO_ALBUM:[{type:0,value:"Add photo to an album"}],ADD_PHOTO_TO_SET:[{type:0,value:"Add photo to a set"}],NO_GROUPS:[{type:0,value:'You’re not in any groups! <a href="//www.flickr.com/groups">Why not join one</a>?'}],NO_GROUPS2:[{type:0,value:'You’re not in any groups! <a href="'},{type:1,value:"url"},{type:0,value:'">Why not join one</a>?'}],NO_GROUPS_ADMIN:[{type:0,value:'You’re not an admin of any groups! <a href="//www.flickr.com/groups_create.gne">Why not create one</a>?'}],NO_GROUPS_ADMIN2:[{type:0,value:'You’re not an admin of any groups! <a href="'},{type:1,value:"url"},{type:0,value:'">Why not create one</a>?'}],NO_GALLERIES:[{type:0,value:"No galleries"}],NO_ALBUMS:[{type:0,value:"No albums"}],NO_SETS:[{type:0,value:"No sets"}],LOADING_GROUPS:[{type:0,value:"Loading groups..."}],LOADING_GALLERIES:[{type:0,value:"Loading galleries..."}],LOADING_ALBUMS:[{type:0,value:"Loading albums..."}],LOADING_SETS:[{type:0,value:"Loading sets..."}],SEARCH_GROUPS_PLACEHOLDER:[{type:0,value:"search groups"}],SEARCH_GALLERIES_PLACEHOLDER:[{type:0,value:"search galleries"}],SEARCH_ALBUMS_PLACEHOLDER:[{type:0,value:"search albums"}],SEARCH_SETS_PLACEHOLDER:[{type:0,value:"search sets"}],GALLERY_TITLE_PLACEHOLDER:[{type:0,value:"gallery title (required)"}],GALLERY_DESCRIPTION_PLACEHOLDER:[{type:0,value:"gallery description"}],ALBUM_TITLE_PLACEHOLDER:[{type:0,value:"Album title"}],SET_TITLE_PLACEHOLDER:[{type:0,value:"Set title"}],DESCRIPTION_PLACEHOLDER:[{type:0,value:"Description (optional)"}],CREATE_NEW_GALLERY:[{type:0,value:"Create a new gallery"}],CREATE_NEW_ALBUM:[{type:0,value:"Create new album"}],CREATE_NEW_SET:[{type:0,value:"Create new set"}],CREATE_GALLERY:[{type:0,value:"Create gallery"}],CREATE_SET:[{type:0,value:"Create set"}],CREATE_ALBUM:[{type:0,value:"Create album"}],BACK_TO_GALLERIES:[{type:0,value:"Back to current galleries"}],BACK_TO_ALBUMS:[{type:0,value:"Back to current albums"}],BACK_TO_SETS:[{type:0,value:"Back to current sets"}],GROUP_PRIVACY_WARNING:[{type:0,value:"This photo is private. If you add it to a group, the members of that group will be able to view, comment on, tag and add notes to it."}],DONT_SHOW_ME_AGAIN:[{type:0,value:"Don’t show me this message again"}],DELETE_PHOTO:[{type:0,value:"Delete Photo"}],PERMANENTLY_DELETE_PHOTO:[{type:0,value:"Permanently Delete This Photo"}],PROBLEM_DELETING:[{type:0,value:"There was a problem deleting this photo"}],ADD_LOCATION:[{type:0,value:"Add Location"}],ADD_PEOPLE:[{type:0,value:"Add people"}],DOWNLOAD_ALL_SIZES:[{type:0,value:"Download / All sizes"}],EDIT_DATES:[{type:0,value:"Edit dates"}],EDIT_TITLE_TAGS_DATES:[{type:0,value:"Edit title, tags, and dates"}],ROTATE:[{type:0,value:"Rotate"}],REPLACE:[{type:0,value:"Replace"}],VIDEOS_NO_EDIT_IN_AVIARY:[{type:0,value:"Videos cannot be edited in Aviary"}],EDIT_IN_AVIARY:[{type:0,value:"Edit in Aviary"}],COMMENTING:[{type:0,value:"Commenting"}],REPORT_ABUSE:[{type:0,value:"Report abuse"}],FEEDBACK:[{type:0,value:"Feedback"}],PEOPLE_TAGGING:[{type:0,value:"People tagging!"}],OPEN_IN_ORGANIZER:[{type:0,value:"Open In Organizr"}],MORE_ACTIONS:[{type:0,value:"More Actions"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-add-to-stuff",(function(e,t){e.Intl.add("hermes/add-to-stuff","en-US",{ADD_TO_LABEL:[{type:0,value:"Add to:"}],NO_RESULTS:[{type:0,value:"No results :("}],NO_GROUPS:[{type:0,value:"No groups"}],DONT_ADMIN_ANY_GROUPS:[{type:0,value:"You don’t admin any groups."}],LEARN_TO_RUN_GROUP:[{type:0,value:"Learn how to run a group"}],HAVENT_JOINED_ANY_GROUPS:[{type:0,value:"You haven’t joined any groups."}],DISCOVER_GROUPS:[{type:0,value:"Discover groups"}],PENDING_APPROVAL:[{type:0,value:"Pending approval"}],CURATIONS_CREATE_NEW_GROUP:[{type:0,value:"Create new group"}],CURATIONS_CREATE_A_NEW_GROUP:[{type:0,value:"Create a new group"}],CURATIONS_CREATE_NEW_ALBUM:[{type:0,value:"Create new album"}],CURATIONS_CREATE_A_NEW_ALBUM:[{type:0,value:"Create a new album"}],CURATIONS_CREATE_NEW_GALLERY:[{type:0,value:"Create new gallery"}],CURATIONS_CREATE_A_NEW_GALLERY:[{type:0,value:"Create a new gallery"}],ABOUT_YOUR_GROUP:[{type:0,value:"About your group"}],COULDNT_ADD_TO_GROUP:[{type:0,value:"Couldn’t add to group."}],COULDNT_ACCEPT_GROUP_INVITE:[{type:0,value:"Couldn’t accept invitation to group."}],COULDNT_INVITE_TO_GROUP:[{type:0,value:"Couldn’t invite to group."}],COULDNT_CANCEL_GROUP_INVITE:[{type:0,value:"Couldn’t cancel group invitation."}],COULDNT_REMOVE_FROM_GROUP:[{type:0,value:"Couldn’t remove from group"}],APPROVE:[{type:0,value:"Approve"}],CURATIONS_ALBUM_NAME:[{type:0,value:"Album name"}],CURATIONS_GALLERY_NAME:[{type:0,value:"Gallery name"}],CURATIONS_DESCRIPTION_OPTIONAL:[{type:0,value:"Description (optional)"}],PLEASE_ENTER_GROUP_NAME:[{type:0,value:"Please enter a group name."}],PLEASE_ENTER_ALBUM_NAME:[{type:0,value:"Please enter an album name."}],PLEASE_ENTER_GALLERY_NAME:[{type:0,value:"Please enter a gallery name."}],COULDNT_SAVE_GROUP:[{type:0,value:"Couldn’t save group. Please try again."}],COULDNT_SAVE_ALBUM:[{type:0,value:"Couldn’t save album. Please try again."}],COULDNT_SAVE_GALLERY:[{type:0,value:"Couldn’t save gallery. Please try again."}],GROUP_PRIVATE_PHOTO_WARNING:[{type:0,value:"This photo is private. If you add it to a group, the members of that group will be able to view, comment on, tag, and add notes to it."}],CONFIRM_GROUP_PRIVATE_PHOTO_ADD:[{type:0,value:"Ok, add to groups anyway"}],DONT_SHOW_MESSAGE_AGAIN:[{type:0,value:"Don’t show me this message again"}],COULDNT_ADD_TO_GROUP_TOO_MANY:[{type:0,value:"Photo in maximum number of groups"}],COULDNT_ADD_TO_GROUP_TOO_MANY_NON_PRO:[{type:0,value:"Photo in maximum number of groups for non-pro account"}],YOU_ALREADY_ADDED_MAXIMUM_TO_GROUP:[{type:0,value:"You have already added the maximum number of photos to this group"}],COULDNT_ADD_PHOTO:[{type:0,value:"Oh no! We couldn’t add the "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"photo"}]},video:{value:[{type:0,value:"video"}]},other:{value:[{type:0,value:"photo"}]}}},{type:0,value:"."}],ONLY_PUBLIC_PHOTOS_ALLOWED:[{type:0,value:"Oops! Only public "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"photos"}]},video:{value:[{type:0,value:"videos"}]},other:{value:[{type:0,value:"photos"}]}}},{type:0,value:" are allowed."}],GALLERY_FULL:[{type:0,value:"Oops! This gallery is full."}],ONLY_SAFE_PHOTOS_ALLOWED:[{type:0,value:"Uh oh! Only "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"photos"}]},video:{value:[{type:0,value:"videos"}]},other:{value:[{type:0,value:"photos"}]}}},{type:0,value:" marked “Safe” are allowed."}],YOUVE_BEEN_BLOCKED:[{type:0,value:"You’ve been blocked by the photo owner."}],OWNER_DOESNT_ALLOW_IN_GALLERIES:[{type:0,value:"Oh no! The "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"photo"}]},video:{value:[{type:0,value:"video"}]},other:{value:[{type:0,value:"photo"}]}}},{type:0,value:" owner doesn’t allow their stuff in galleries."}],GROUP_LIMIT_REACHED_PER_MONTH:[{type:0,value:"You reached the group’s posting limit of "},{type:1,value:"countString"},{type:0,value:" "},{type:6,value:"count",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" per month."}],GROUP_LIMIT_REACHED_PER_WEEK:[{type:0,value:"You reached the group’s posting limit of "},{type:1,value:"countString"},{type:0,value:" "},{type:6,value:"count",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" per week."}],GROUP_LIMIT_REACHED_PER_DAY:[{type:0,value:"You reached the group’s posting limit of "},{type:1,value:"countString"},{type:0,value:" "},{type:6,value:"count",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" per day."}],GROUP_LIMIT_REACHED:[{type:0,value:"You reached the group’s posting limit of "},{type:1,value:"countString"},{type:0,value:" "},{type:6,value:"count",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:"."}],GROUP_DISABLED_POSTING:[{type:0,value:"Posting to this group is disabled."}],GROUP_ONLY_ACCEPTS_PHOTOS:[{type:0,value:"This group only accepts photos."}],GROUP_ONLY_ACCEPTS_VIDEOS:[{type:0,value:"This group only accepts videos."}],GROUP_VIDEO_STILL_PROCESSING:[{type:0,value:"This video is still being processed."}],GROUP_DOESNT_ALLOW_PHOTO_VIDEO:[{type:0,value:"This group does not allow Photo/Video content types."}],GROUP_DOESNT_ALLOW_SCREENSHOTS:[{type:0,value:"This group does not allow screenshots."}],GROUP_DOESNT_ALLOW_ART:[{type:0,value:"This group does not allow Art/Illustration content types."}],GROUP_DOESNT_ALLOW_RESTRICTED:[{type:0,value:"This group does not allow restricted content."}],GROUP_ONLY_ALLOWS_SAFE:[{type:0,value:"This group only allows safe content."}],GROUP_REQUIRES_GEOTAG:[{type:0,value:"This group only allows geotagged items."}],ALREADY_GROUP_WITH_NAME:[{type:0,value:"There is already a group with this name."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-flag-photo-dialog-content",(function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=r(l,"if").call(null!=e?e:n.nullContext||{},null!=e?r(e,"fallsWithinSettings"):e,{name:"if",hash:{},fn:n.program(2,a,0),inverse:n.program(4,a,0),data:a,loc:{start:{line:2,column:1},end:{line:6,column:8}}}))?o:""},2:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(l,"intlHTMLMessage")||e&&o(e,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.FLAG_CONFIRMATION_SAFE_WITHIN"},data:a,loc:{start:{line:3,column:2},end:{line:3,column:81}}}))+"\n"},4:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(l,"intlHTMLMessage")||e&&o(e,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.FLAG_CONFIRMATION_SAFE_OUTSIDE"},data:a,loc:{start:{line:5,column:2},end:{line:5,column:82}}}))+"\n"},6:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=r(l,"if").call(null!=e?e:n.nullContext||{},null!=e?r(e,"fallsWithinSettings"):e,{name:"if",hash:{},fn:n.program(7,a,0),inverse:n.program(9,a,0),data:a,loc:{start:{line:10,column:1},end:{line:14,column:8}}}))?o:""},7:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(l,"intlHTMLMessage")||e&&o(e,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.FLAG_CONFIRMATION_MODERATE_WITHIN"},data:a,loc:{start:{line:11,column:2},end:{line:11,column:85}}}))+"\n"},9:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(l,"intlHTMLMessage")||e&&o(e,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.FLAG_CONFIRMATION_MODERATE_OUTSIDE"},data:a,loc:{start:{line:13,column:2},end:{line:13,column:86}}}))+"\n"},11:function(n,e,l,t,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return null!=(o=r(l,"if").call(null!=e?e:n.nullContext||{},null!=e?r(e,"fallsWithinSettings"):e,{name:"if",hash:{},fn:n.program(12,a,0),inverse:n.program(14,a,0),data:a,loc:{start:{line:18,column:1},end:{line:22,column:8}}}))?o:""},12:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(l,"intlHTMLMessage")||e&&o(e,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.FLAG_CONFIRMATION_RESTRICTED_WITHIN"},data:a,loc:{start:{line:19,column:2},end:{line:19,column:87}}}))+"\n"},14:function(n,e,l,t,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(l,"intlHTMLMessage")||e&&o(e,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.FLAG_CONFIRMATION_RESTRICTED_OUTSIDE"},data:a,loc:{start:{line:21,column:2},end:{line:21,column:88}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(n,e,l,t,a){var o,r=null!=e?e:n.nullContext||{},s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return(null!=(o=s(l,"if").call(r,null!=e?s(e,"isSafe"):e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:0},end:{line:7,column:7}}}))?o:"")+"\n"+(null!=(o=s(l,"if").call(r,null!=e?s(e,"isModerate"):e,{name:"if",hash:{},fn:n.program(6,a,0),inverse:n.noop,data:a,loc:{start:{line:9,column:0},end:{line:15,column:7}}}))?o:"")+"\n"+(null!=(o=s(l,"if").call(r,null!=e?s(e,"isRestricted"):e,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:17,column:0},end:{line:23,column:7}}}))?o:"")+"\n"+n.escapeExpression((s(l,"intlHTMLMessage")||e&&s(e,"intlHTMLMessage")||n.hooks.helperMissing).call(r,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.FOR_MORE_INFORMATION_SAFESEARCH"},data:a,loc:{start:{line:25,column:0},end:{line:25,column:81}}}))},useData:!0}),t={};n.Array.each([],(function(e){var l=n.Template.get("hermes/"+e);l&&(t[e]=l)})),n.Template.register("hermes/flag-photo-dialog-content",(function(e,a){return(a=a||{}).partials=a.partials?n.merge(t,a.partials):t,l(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("footer-full-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="footer-full-content"></div>'),this.footerHelper=new e.FooterHelper(this.appContext,{}),this.appStateParams=t,this},buildContainer:function(){var t;return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),(t=this.footerHelper.getTemplateParams()).showCompany="en-us"===this.appContext.lang.toLowerCase(),t.isSOHP=this.appStateParams.isSOHP,YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,t.requiresCookieConsent=!0,this.appContext.flipper.isFlipped("enable-geoblock-cookie-consent")&&(t.requiresCookieConsent=this.appContext.requiresCookieConsent),this.setContainerWithTemplate("footer-full",t),this},activate:function(){var t,n=this,i=this.get("container");return this.registerEventHandler(i.delegate("click",(function(e){t=e.target.ancestor(".lang-switcher",!0),e.preventDefault(),n.footerHelper.createDropAround(t,n)}),".lang-switcher")),this.footNode=i.one(".foot"),this.bannerContainer=i.one(".foot-banner-container"),this.isBannerFixed=!1,this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.updatePositioning.bind(this))),this.registerEventHandler(e.globalEvents.subscribe("window:scroll",this.updatePositioning.bind(this))),this.registerEventHandler(this.appContext.bannerManager.on("renderBanner",(function(e){var t,i,r;if("footer"===e.placement)return i=(t=e.bannerView).get("container"),(r=n.bannerContainer).empty(),r.appendChild(i),t.on("subviewActivated",(function(){n.get("isCSSLoaded")&&n.updatePositioning()})),t.on("dismissed",(function(){t.get("container").remove(),t.destroy(),n.get("isCSSLoaded")&&n.updatePositioning()})),n.appContext.trustarcConsentManager&&(n.trustarcReadyListener=n.appContext.trustarcConsentManager.onReady((()=>{n.placeTrustArcBanner(r)})),n.trustarcReadyListener&&n.registerEventHandler(n.trustarcReadyListener)),t.normalizedActivate()}))),this.onCSSLoaded(this.updatePositioning),this.registerEventHandler(e.on("globalNav:navDrawerClosed",(function(){n.bannerContainer&&n.bannerContainer.removeClass("mobileDrawerOpen")}))),this.registerEventHandler(e.on("globalNav:navDrawerOpen",(function(){n.bannerContainer&&n.bannerContainer.addClass("mobileDrawerOpen")}))),this.registerEventHandler(i.delegate("click",(function(t){t.preventDefault(),e.ReportAbuseHelper.showReportModal(n.appContext)}),".footer-report-item")),this.appContext.trustarcConsentManager&&this.registerEventHandler(this.appContext.trustarcConsentManager.on("reopen",(()=>{this.placeTrustArcBanner(this.bannerContainer)}))),this},updateBannerPosition:function(t){var n=e.config.win.scrollY+e.config.win.innerHeight,i=this.footNode.getY();this.isBannerFixed&&n>=i?(this.bannerContainer.removeClass("fixed"),this.isBannerFixed=!1):!this.isBannerFixed&&n<i&&(this.bannerContainer.addClass("fixed"),this.isBannerFixed=!0)},updateBottomPadding:function(t){this.footerHeight=this.footNode.get("clientHeight"),e.one("#content").setStyle("padding-bottom",this.footerHeight+this.bannerContainer.get("clientHeight")-1)},updatePositioning:function(){this.updateBannerPosition(),this.updateBottomPadding(),e.fire("footerFull:positionUpdated")},placeTrustArcBanner:function(t){var n=e.one("#consent_blackbar");n&&t.appendChild(n)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-footer-full","url-helper","report-abuse-helper","fluid-droparound-view","footer-helper","url","flag-modal-view","fluid-modal-view","hermes-template-flag-photo-dialog-content"],langBundles:["common","policy-terms","welcome"]});YUI.add("sohp-slideshow-photo-models",(function(o){function e(o){e.superclass.constructor.call(this,o)}o.Models[this.name]=e,o.extend(e,o.FlickrModelRegistry,{name:this.name,attributes:{photoList:{defaultValue:[{id:"50605807088",title:"Desert Beauty",userName:"Christoph Fischer",photoUrl:"/photos/christoph_fischer/50605807088",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Desert_Beauty_Christoph_Fischer.jpg"},{id:"50390069077",title:"Sheep in the woods II",userName:"James Mills",photoUrl:"/photos/86954319@N04/50390069077/",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Sheep_in_the_woods_II_James_Mills.jpg"},{id:"49852239266",title:"Dawn of Another Day",userName:"Sky Matthews",photoUrl:"/photos/skymatthews/49852239266",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Dawn_of_Another_Day_Sky_Matthews.jpg"},{id:"50508946826",title:"Cool Power commended-LPOTY",userName:"Steve Cole",photoUrl:"/photos/kingnik/50508946826",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Cool_Power_commended-LPOTY_UK_Steve_Cole.jpg"},{id:"50371215583",title:"Happy Birthday Adam!",userName:"Iwona Podlasinska",photoUrl:"/photos/iwonapodlasinska/50371215583",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Happy_Birthday_Adam_Iwona_Podlasinska.jpg"},{id:"50559585627",title:"Secluded",userName:"Pete Rowbottom",photoUrl:"/photos/pete37038/50559585627",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Secluded_Pete_Rowbottom.jpg"},{id:"50553575881",title:"Tree and Morning Mist",userName:"Jos Buurmans",photoUrl:"/photos/josbuurmansphotography/50553575881",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Tree_and_Morning_Mist_Jos_Buurmans.jpg"},{id:"50021068932",title:"sunset 1663",userName:"Junji Aoyama",photoUrl:"/photos/142474085@N03/50021068932",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/sunset_1663_Junji_Aoyama.jpg"},{id:"50515727882",title:"A Time of Change",userName:"Rachel Brokaw",photoUrl:"/photos/missinterpretations/50515727882",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/A_Time_of_Change_Rachel_Brokaw.jpg"},{id:"50416691972",title:"Fantasy Island",userName:"Daniel Cheong",photoUrl:"/photos/danielcheong/50416691972",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Fantasy_Island_Daniel_Cheong.jpg"},{id:"50579895532",title:"Europe's best view",userName:"Fabian Fortmann",photoUrl:"/photos/fabianf_/50579895532",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Europes_best_View_Fabian_Fortmann.jpg"},{id:"50115566652",title:"If Only We Could Turn Back Time",userName:"Anna Kwa",photoUrl:"/photos/annakwa/50115566652",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/If_Only_We_Could_Turn_Back_Time_Anna_Kwa.jpg"},{id:"50597817398",title:"Mists of Renfrew",userName:"Adam Gibbs",photoUrl:"/photos/adamgibbsphotography/50597817398",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Mists_of_renfrew_Adam_Gibbs.jpg"},{id:"49779688327",title:"Frosch, Bokeh 2",userName:"axelfw",photoUrl:"/photos/axelfw/49779688327",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Frosch_Bokeh_2_Axel_F.jpg"},{id:"49368797831",title:"Catwalk am Bahnhof Zürich Oerlikon",userName:"Peter Arn",photoUrl:"/photos/peter-arn/49368797831",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Catwalk_am_Bahnhof_Zurich_Oerlikon_Peter_Arn.jpg"},{id:"50305871576",title:"Benito",userName:"Ria Putzker",photoUrl:"/photos/144312453@N08/50305871576",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/benito_druck.jpg"},{id:"50278165453",title:"Albuquerque, New Mexico",userName:"Jorge Guadalupe Lizárraga",photoUrl:"/photos/elzopilote/50278165453",url:o.config.flickr.urls.assetRoot+"/images/sohp/2020-top-25/Untitled_Jorge_Guadalupe_Lizarraga.jpg"}]}}})}),"@VERSION@");YUI.add("sohp-slideshow-sohp-e-view",(function(e){var t;e.namespace("Views")[this.name]=e.Base.create("sohp-slideshow-sohp-e-view",e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"global-nav-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,disableMobileNav:!0,isSOHP:!0,theme:"semi-transparent-theme"},"footer-full-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0,isSOHP:!0}},loadState:function(){var e=this;return this.usedInspirationImages=[],this.appContext.getModel("sohp-slideshow-photo-models",1).then((function(i){t=i.getValue("photoList"),e.inspirationImages=e.shuffleArray(t).concat(),e.inspirationImage=e.pickInspirationImage()}))},buildHeadContainer:function(){var e,t="";e="https://farm4.staticflickr.com/3914/15118079089_489aa62638_b.jpg",t+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1"}),t+=this.templates("head-meta")({isName:!0,metaName:"apple-itunes-app",metaValue:"app-id=328407587"}),t+=this.templates("head-link")({rel:"canonical",href:"https://www.flickr.com"}),t+='<meta property="title" content="'+this.intlMessage({intlName:"sohp.SOHP_TITLE_INSPIRATION"})+'" data-dynamic="true"/>',t+='<meta property="description" content="'+this.intlMessage({intlName:"sohp.SOHP_BODY_INSPIRATION_MOD_1"})+'" data-dynamic="true"/>',t+='<meta property="og:title" content="Flickr" data-dynamic="true"/>',t+='<meta property="og:type" content="website" data-dynamic="true"/>',t+='<meta property="og:description" content="'+this.intlMessage({intlName:"common.FLICKR_META_DESCRIPTION"})+'" data-dynamic="true"/>',t+='<meta property="og:image" content="'+e+'" data-dynamic="true"/>',t+='<meta name="twitter:card" content="summary_large_image" data-dynamic="true">',t+='<meta name="twitter:creator" content="@flickr" data-dynamic="true">',t+='<meta name="twitter:title" content="Flickr" data-dynamic="true">',t+='<meta name="twitter:description" content="'+this.intlMessage({intlName:"common.FLICKR_META_DESCRIPTION"})+'" data-dynamic="true">',t+='<meta name="twitter:image:src" content="'+e+'" data-dynamic="true">',this.set("headContainer",t),YUI.Env.isServer||this.updateHead()},buildContainer:function(){var e;return e={"inspiration-image":this.inspirationImage,hideControlsClass:!0},this.setContainerWithTemplate("sohp-e-slideshow",e),this.get("container").addClass("sohp-slideshow-view"),this},additionalViewClasses:function(){var e=[],t=this.getOS();return"ios"!==t&&"android"!==t||e.push(t),e},shuffleArray:function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(Math.random()*(t+1)),s=e[t];e[t]=e[i],e[i]=s}return e},getOS:function(){var t;return t=YUI.Env.isServer?e.BrowserSupport.getOSString(this.appContext.request.headers["user-agent"]):e.UA.os,String(t).toLowerCase()},activate:function(){var t=this,i=this.get("container");return this.inspirationBucketNode=i.one(".inspiration-bucket"),this.footerNode=e.one(".footer-full-view"),this.startSlideshow(!0),this.registerEventHandler(e.globalEvents.subscribe("window:resize",this.handlePageResize.bind(this))),this.registerEventHandler(i.delegate("click",this.slideshowRefresh,".next-arrow",this)),this.registerEventHandler(e.one("body").on("key",this.slideshowRefresh.bind(this),"down:39")),this.registerEventHandler(i.one(".prev-arrow").on("click",this.slideshowPrev,this)),this.registerEventHandler(e.one("body").on("key",this.slideshowPrev.bind(this),"down:37")),i.addClass("peek-a-boo"),this.addView(this.inspirationImage),this.preloadTimeout=setTimeout(this.preloadImages.bind(this),500),t.appContext.viewportData.getWidth()<700?(this.inspirationBucketNode.setStyle("margin-bottom",-this.footerNode.one(".foot").get("clientHeight")),this.footerNode.setStyle("bottom",-this.footerNode.one(".foot").get("clientHeight"))):this.inspirationBucketNode.setStyle("margin-bottom",this.footerNode.get("clientHeight")),this.registerEventHandler(e.on("footerFull:positionUpdated",(function(){t.appContext.viewportData.getWidth()<700?(t.inspirationBucketNode.setStyle("margin-bottom",-t.footerNode.one(".foot").get("clientHeight")),t.footerNode.setStyle("bottom",-t.footerNode.one(".foot").get("clientHeight"))):(t.inspirationBucketNode.setStyle("margin-bottom",t.footerNode.get("clientHeight")),t.footerNode.setStyle("bottom",0))}))),this},slideshowPrev:function(e){this.usedInspirationImages.length>1?(this.inspirationImages.push(this.usedInspirationImages.pop()),this.inspirationImages.push(this.usedInspirationImages.pop())):(this.inspirationImages.push(this.usedInspirationImages.pop()),this.inspirationImages.push(this.inspirationImages.shift())),this.slideshowRefresh(e)},slideshowRefresh:function(e){e.halt(),this.slideshowTimeout&&clearTimeout(this.slideshowTimeout),this.setNextAsCurrentTimeout&&clearTimeout(this.setNextAsCurrentTimeout),this.startSlideshow(!0)},startSlideshow:function(e){e?(this.slideshowTimeout=setTimeout(this.loadNewInspiration.bind(this),0),this.get("container").one(".next-inspiration").addClass("slide")):this.slideshowTimeout=setTimeout(this.loadNewInspiration.bind(this),5500)},preloadImages:function(){this.preloadImage(t[0],0)},preloadImage:function(e,i){var s=new Image,o=this;function a(){var e=i+1;i<t.length-1&&t[e]&&o.preloadImage(t[e],e)}s.onerror=function(){a()},s.onload=function(){a()},s.src=e.url},addView:function(e){return this.appContext.getViewCounter().queue(e.id)},loadNewInspiration:function(){var t=this.get("container"),i=t.one(".next-inspiration"),s=t.one(".current-inspiration"),o=t.one(".next-attribution"),a=s.one(".attribution");this.inspirationImage=this.pickInspirationImage();var n=this.inspirationImage.url,r=this.inspirationImage.photoUrl,h=this.intlMessage({intlName:"common.BY_USER",user:this.inspirationImage.userName}),l=this.inspirationImage.attribution,d=this.inspirationImage.title;s.addClass("fade-out"),a.addClass("fade-out"),s.removeClass("paused-animation"),a.removeClass("paused-animation"),i.setStyles({backgroundImage:"url("+encodeURI(n)+")"}),o.one(".username a").set("text",h).setAttribute("href",r),o.one(".photo-title a").set("text",d).setAttribute("href",r),l?o.one(".attribution-icon i").set("className","attribution-icon-"+l):o.one(".attribution-icon i").set("className",""),this.setNextAsCurrentTimeout=setTimeout((function(){s.setStyles({backgroundImage:"url("+encodeURI(n)+")"}),a.one(".username a").set("text",h).setAttribute("href",r),a.one(".photo-title a").set("text",d).setAttribute("href",r),l?a.one(".attribution-icon i").set("className","attribution-icon-"+l):a.one(".attribution-icon i").set("className",""),s.removeClass("fade-out"),a.removeClass("fade-out"),i.removeClass("slide")}),500),this.addView(this.inspirationImage),e.rapidTracker.beacon(this.name,"inspireme"),this.startSlideshow(!1)},pickInspirationImage:function(){var e;return 0===this.inspirationImages.length&&(this.inspirationImages=t.concat(),this.usedInspirationImages=[]),e=this.inspirationImages.pop(),this.usedInspirationImages.push(e),e},handlePageResize:function(e){var t=this.get("container");t.hasClass("hack-the-height")&&t.removeClass("hack-the-height"),t.replaceClass("peek-a-boo","peek-a-boo-perm")},destructor:function(){clearTimeout(this.slideshowTimeout),clearTimeout(this.preloadTimeout),clearTimeout(this.setNextAsCurrentTimeout)}},{ATTRS:{}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-sohp-e-slideshow","hermes-template-head-meta","hermes-template-head-link","global-nav-view","footer-full-view","url","browser-support","sohp-slideshow-photo-models"],langBundles:["common","sohp"]});